device:
  name: "Hoymiles Inverter"
  manufacturer: "Hoymiles"
  model: "Multiple"

entities:
  # ------------------------------------------------------------
  # [Battery Charge/Discharge Parameters]
  # ------------------------------------------------------------

  - platform: number
    key: battery_max_charge_power
    name: "Battery Max Charge Power (Holding 306, uint16)"
    unit: "% ??"
    minimum: 10
    maximum: 100
    description: "Battery maximum charge power rate"
    read:
      type: holding
      address: 306
      data_type: uint16
    write:
      type: holding
      address: 306
      data_type: uint16

  - platform: number
    key: battery_max_discharge_power
    name: "Battery Max Discharge Power (Holding 307, uint16)"
    unit: "% ??"
    minimum: 10
    maximum: 100
    description: "Battery maximum discharge power rate"
    read:
      type: holding
      address: 307
      data_type: uint16
    write:
      type: holding
      address: 307
      data_type: uint16

  - platform: number
    key: max_soc
    name: "Max SOC (Holding 308, uint16)"
    unit: "%"
    minimum: 10
    maximum: 100
    description: "Battery maximum charge SOC"
    read:
      type: holding
      address: 308
      data_type: uint16
    write:
      type: holding
      address: 308
      data_type: uint16

  - platform: number
    key: min_soc
    name: "Min SOC (Holding 309, uint16)"
    unit: "%"
    minimum: 10
    maximum: 90
    description: "Battery maximum Discharge SOC"
    read:
      type: holding
      address: 309
      data_type: uint16
    write:
      type: holding
      address: 309
      data_type: uint16

  - platform: number
    key: battery_capacity
    name: "Battery Capacity (Holding 4102, uint16)"
    unit: "Ah"
    description: "Battery capacity"
    read:
      type: holding
      address: 4102
      data_type: uint16
      scale: 0.1
#    write:
#      type: holding
#      address: 4102
#      data_type: uint16
#      scale: 0.1

  - platform: number
    key: max_charge_current
    name: "Max Charge Current (Holding 4103, uint16)"
    unit: "A"
    description: "Maximum charging current"
    read:
      type: holding
      address: 4103
      data_type: uint16
      scale: 0.1
#    write:
#      type: holding
#      address: 4103
#      data_type: uint16
#      scale: 0.1

  - platform: number
    key: max_discharge_current
    name: "Max Discharge Current (Holding 4104, uint16)"
    unit: "A"
    description: "Maximum discharge current"
    read:
      type: holding
      address: 4104
      data_type: uint16
      scale: 0.1
#    write:
#      type: holding
#      address: 4104
#      data_type: uint16
#      scale: 0.1

  # ------------------------------------------------------------
  # [Inverter EMS Parameters]
  # ------------------------------------------------------------

  - platform: select
    key: ems_mode
    name: "EMS Mode (Holding 4300, uint16)"
    values:
      0: "Self-Use"
      1: "Economical Mode"
      2: "Backup Mode"
      3: "Pure Off-Grid Mode"
      4: "Force Charge Mode"
      5: "Force Discharge Mode"
      6: "Peak-shaving Mode"
      7: "TOU Mode"
    read:
      type: holding
      address: 4300
      data_type: uint16
    write:
      type: holding
      address: 4300
      data_type: uint16

  - platform: number
    key: self_used_soc
    name: "Self-Used SOC (Holding 4301, uint16)"
    unit: "%"
    minimum: 10
    maximum: 100
    description: "Reserved SOC in self-use mode"
    read:
      type: holding
      address: 4301
      data_type: uint16
    write:
      type: holding
      address: 4301
      data_type: uint16

  - platform: number
    key: backup_soc
    name: "Back-up SOC (Holding 4302, uint16)"
    unit: "%"
    minimum: 60
    maximum: 100
    description: "Reserved SOC in back-up mode"
    read:
      type: holding
      address: 4302
      data_type: uint16
    write:
      type: holding
      address: 4302
      data_type: uint16

  - platform: number
    key: force_charge_soc
    name: "Force Charge SOC (Holding 4303, uint16)"
    unit: "%"
    minimum: 10
    maximum: 100
    description: "Max SOC in force charge mode"
    read:
      type: holding
      address: 4303
      data_type: uint16
    write:
      type: holding
      address: 4303
      data_type: uint16

  - platform: number
    key: maximum_charge_power
    name: "Maximum Charge Power (Holding 4304, uint16)"
    unit: "%"
    description: "Maximum charge power rate"
    read:
      type: holding
      address: 4304
      data_type: uint16
      scale: 0.1
    write:
      type: holding
      address: 4304
      data_type: uint16
      scale: 0.1

  - platform: number
    key: force_disarge_soc
    name: "Force Discharge SOC (Holding 4305, uint16)"
    unit: "%"
    description: "Max SOC in force discharge mode"
    read:
      type: holding
      address: 4305
      data_type: uint16
    write:
      type: holding
      address: 4305
      data_type: uint16

  - platform: number
    key: maximum_discharge_power
    name: "Maximum Discharge Power (Holding 4306, uint16)"
    unit: "%"
    description: "Maximum discharge power rate"
    read:
      type: holding
      address: 4306
      data_type: uint16
      scale: 0.1
    write:
      type: holding
      address: 4306
      data_type: uint16
      scale: 0.1

  - platform: number
    key: economic_mode_soc
    name: "Economic Mode SOC (Holding 4307, uint16)"
    unit: "%"
    description: "Reserved SOC in economic mode"
    read:
      type: holding
      address: 4307
      data_type: uint16
    write:
      type: holding
      address: 4307
      data_type: uint16

  - platform: number
    key: tou_mode_reserved_soc
    name: "TOU Mode Reserved SOC (Holding 4545, uint16)"
    unit: "%"
    minimum: 10
    maximum: 100
    read:
      type: holding
      address: 4545
      data_type: uint16
    write:
      type: holding
      address: 4545
      data_type: uint16

  # ------------------------------------------------------------
  # [System Parameters]
  # ------------------------------------------------------------

  - platform: select
    key: work_status
    name: "Work Status (Input 0, uint16)"
    values:
      0: "PowerInit"
      1: "StdbyMode"
      2: "GridOnTest"
      3: "GridOnMode"
      4: "FaultMode"
      5: "GridOffMode"
      6: "ByPassMode"
    read:
      type: input
      address: 0
      data_type: uint16

  - platform: sensor
    key: power_dsp_fm_version
    name: "Power DSP FM Version (Input 1, uint16)"
    description: "Power DSP firmware version"
    read:
      type: input
      address: 1
      data_type: uint16

  - platform: sensor
    key: sw_fault
    name: "SW Fault (Input 19, uint32)"
    description: "Software fault code"
    read:
      type: input
      address: 19
      data_type: uint32

  - platform: sensor
    key: hw_fault
    name: "HW Fault (Input 21, uint32)"
    description: "Hardware fault code"
    read:
      type: input
      address: 21
      data_type: uint32

  - platform: sensor
    key: pv_total_power
    name: "PV Total Power (Input 26, uint16)"
    unit: "W"
    description: "PV total power"
    read:
      type: input
      address: 26
      data_type: uint16

  # â€¦ (rest analog gleich aufgebaut)
